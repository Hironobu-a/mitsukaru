# 少人数チーム向けテスト方針・実践フロー

## テスト方針
- クリティカルな機能・バグが出やすい箇所を優先してテストを書く
- テストは「書きやすさ・保守しやすさ」を重視し、過剰な網羅は目指さない
- E2Eテストは最重要フローのみ自動化し、他は手動確認でカバー
- テストはCIで自動実行し、失敗時は必ず修正・原因究明
- テストコードも本番コード同様にレビュー・リファクタ対象

---

## 開発フローとテスト実践（時系列）

### 1. 要件定義・設計フェーズ
- 仕様・要件をNotionやREADMEにまとめる
- クリティカルパス（最重要ユーザーフロー）を明確化
- テスト観点リストを作成（例：ログイン、登録、購入など）

### 2. 実装前
- 重要なロジックはTDD/テストファーストでテストケースを先に書く
- FactoryやSeederでテストデータの準備

### 3. 実装中
- 単体テスト（PHPUnit等）を随時追加
- 主要な画面遷移・APIはE2Eテスト（Cypress等）も記述
- 保存時やコミット時に静的解析・リントを自動実行

### 4. プルリクエスト作成時
- テストが全てパスすることを確認
- CIで自動的にlint・testが走る
- プルリクエストで相互レビュー（テストコードも含む）

### 5. マージ・デプロイ前
- ステージング環境でE2Eテストを自動実行
- クリティカルパス以外は手動で画面確認
- テスト失敗時は即修正

### 6. 本番リリース後
- Sentry等でエラー監視
- バグ発生時は再発防止のためテストケースを追加
- 定期的にテスト・CI/CDの見直し・改善

---

## 補足
- テスト観点やカバレッジは定期的に見直し、必要に応じて追加・削除
- テストの実行時間が長くなった場合は並列化や分割実行を検討
- 属人化を防ぐため、テスト方針や運用ルールは必ずドキュメント化
